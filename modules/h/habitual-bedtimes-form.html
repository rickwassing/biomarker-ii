<div id=D__ID>
        <section id=form_container__ID>
            <div id=header__ID>
                Habitual Bedtimes
            </div>
            <form id=F__ID>
                <div class='container'>
                    <!-- participant part for all tsak forms -------------------->
                    <div class='row row__ID' id=row_participant__ID>
                        <div class='col-sm-12 col-lg-9 input__ID'>
                            <span class='label__ID'>Participant</span><br>
                            <input type='text' name='Participant' class='form-control' id='Participant__ID' data-id='Participant' required />
                        </div>
                        <div class='col-sm-12 col-lg-3 input__ID'>
                            <span class='label__ID'>Participant ID</span><br>
                            <input type='text' name='Participant_uid' class='form-control' readonly />
                        </div>
                        <hr style='border-top: 1px solid #888;width: 100%;margin:10px 0'>
                    </div>
                    <!---------------------------------------------------->
    
                    <!-- FORM INPUTS -->
    
                    <!-- Question and Answerset -->
                    <div class='row row__ID'><div class='col'>
                    <div class='row'>
                        <div class='col'>
                            <span class='survey-question'>Habitual bed time from actigraphy recordings</span>
                        </div>
                        <div class='col'>
                            <span class='survey-question'>Habitual wake time from actigraphy recordings</span>
                        </div>
                    </div>
                    <div class='row'>
                        <div class='col'>
                            <label class='survey-label' id='HBT_bedTime_prelabel'></label>
                            <input type='text' maxlength='5' class='form-control' name='HBT_bedTime' id='HBT_bedTime' />
                            <label class='survey-label' id='HBT_bedTime_postlabel'></label>
                        </div>
                        <div class='col'>
                            <label class='survey-label' id='HBT_wakeTime_prelabel'></label>
                            <input type='text' maxlength='5' class='form-control' name='HBT_wakeTime' id='HBT_wakeTime' />
                            <label class='survey-label' id='HBT_wakeTime_postlabel'></label>
                        </div>
                    </div>
                    </div></div>
    
                    <!-- Question and Answerset -->
                    <div class='row row__ID'><div class='col'>
                    <div class='row'>
                        <div class='col'>
                            <span class='survey-question'>Average lights off time from actigraphy recordings</span>
                        </div>
                        <div class='col'>
                            <span class='survey-question'>Average lights on time from actigraphy recordings</span>
                        </div>
                    </div>
                    <div class='row'>
                        <div class='col'>
                            <label class='survey-label' id='HBT_lightsOff_prelabel'></label>
                            <input type='text' maxlength='5' class='form-control' name='HBT_lightsOff' id='HBT_lightsOff' />
                            <label class='survey-label' id='HBT_lightsOff_postlabel'></label>
                        </div>
                        <div class='col'>
                            <label class='survey-label' id='HBT_lightsOn_prelabel'></label>
                            <input type='text' maxlength='5' class='form-control' name='HBT_lightsOn' id='HBT_lightsOn' />
                            <label class='survey-label' id='HBT_lightsOn_postlabel'></label>
                        </div>
                    </div>
                    </div></div>
    
                    <!-- Question and Answerset -->
                    <div class='row row__ID'><div class='col'>
                    <div class='row'>
                        <div class='col'>
                            <span class='survey-question'>Lab night's bed time</span>
                        </div>
                        <div class='col'>
                            <span class='survey-question'>Lab night's wake time</span>
                        </div>
                    </div>
                    <div class='row'>
                        <div class='col'>
                            <label class='survey-label' id='LAB_bedTime_prelabel'></label>
                            <input type='text' maxlength='5' class='form-control' name='LAB_bedTime' id='LAB_bedTime' />
                            <label class='survey-label' id='LAB_bedTime_postlabel'></label>
                        </div>
                        <div class='col'>
                            <label class='survey-label' id='LAB_wakeTime_prelabel'></label>
                            <input type='text' maxlength='5' class='form-control' name='LAB_wakeTime' id='LAB_wakeTime' />
                            <label class='survey-label' id='LAB_wakeTime_postlabel'></label>
                        </div>
                    </div>
                    </div></div>
    
                    <!-- Question and Answerset -->
                    <div class='row row__ID'><div class='col'>
                    <div class='row'>
                        <div class='col'>
                            <span class='survey-question'>Lab night's lights off time</span>
                        </div>
                        <div class='col'>
                            <span class='survey-question'>Lab night's lights on time</span>
                        </div>
                    </div>
                    <div class='row'>
                        <div class='col'>
                            <label class='survey-label' id='LAB_lightsOff_prelabel'></label>
                            <input type='text' maxlength='5' class='form-control' name='LAB_lightsOff' id='LAB_lightsOff' />
                            <label class='survey-label' id='LAB_lightsOff_postlabel'></label>
                        </div>
                        <div class='col'>
                            <label class='survey-label' id='LAB_lightsOn_prelabel'></label>
                            <input type='text' maxlength='5' class='form-control' name='LAB_lightsOn' id='LAB_lightsOn' />
                            <label class='survey-label' id='LAB_lightsOn_postlabel'></label>
                        </div>
                    </div>
                    </div></div>

                    <!-- submit button part for all tsak forms------------>
                    <br>
                    <div class='row'>
                        <div class='col'>
                            <button id='submit__ID' type='submit' class='btn btn-secondary'>Submit</button>
                        </div>
                    </div>
                    <!---------------------------------------------------->
                </div>
            </form>
        </section>
        <script>
            function F__ID(){
                //-------------------------------------
                VmInclude:'__COMPONENT__/f/form.01.js'
                VmInclude:'__CURRENT_PATH__/../../s/shared-task-form.js'
                //-------------------------------------
    
                //---------------------------------------------------------
                // When clicking on a DIV that contains a radio button
                // automatically select the radio button or the 
                // multiple-select button.
                $('.col-sm').each(function() {
                    $(this).on('click',function() {
                        console.log(this.children);
                        for (i=0;i<this.children.length;i++) {
                            if (this.children[i].type == 'checkbox') {
                                //this.children[i].checked = !this.children[i].checked;
                            } else if (this.children[i].type == 'radio') {
                                this.children[i].checked = true;
                            }
                        }
                    });
                });

                $('input[type=checkbox]').each(function() {
                    $(this).on('click',function() {
                        this.checked = !this.checked;
                        console.log('pressed checkbox');
                    });
                });
            }
        </script>
        <script>
            // Variables
            var intervalObj;
            var elBox;
            var elRow;
            var childRow;
            var wTotal;
            var wBox
            var newW;
            var wInit
            var W;
    
            //Assign events
            document.addEventListener("mouseup", mouseup);
            document.addEventListener("mouseout", mouseup);
    
            // Support Functions
    
            function mouseup(e) {
                if(intervalObj) {  //Only stop if exists
                    clearInterval(intervalObj);
                }
            }
    
            // Add a leading zero to intergers 
            function addLeadingZero(val,n) {
                var s = String(val);
                while (s.length < n) {s = "0" + s;}
                return s;
            }
    
            function readValue(name,pObj) {
                
                var spans = document.getElementsByName(name);
                var val = $("#" + name).val();
                
                if (val != "") {
                    var delimiters = [];cnt=0;
                    for (i = 0; i < pObj.length; i++) {
                        if (pObj[i].delimiter != "") {
                            delimiters[cnt] = pObj[i].delimiter;
                            cnt++;
                        }
                    }
                    
                    if (delimiters != "") {
                        var valArr = val.split(new RegExp(delimiters.join('|'), 'g'));
                    } else {
                        var valArr = [val];
                    }
                    
                    for (i = 0; i < pObj.length; i++) {
                        pObj[i].set = 1;
                        pObj[i].value = parseInt(valArr[i]);
                        $("#" + pObj[i].spanId).html(addLeadingZero(valArr[i],pObj[i].nChar));
                        $("#" + pObj[i].spanId).css("color","#000");
                    }
                }
            }
    
            function resizePickers(sgid,wInit) {
                
                    elBox    = $("#picker_" + sgid).parent();
                    elRow    = $("#picker_" + sgid + "_row");
                    childRow = elRow.children();
                    
                    wTotal = wInit;
                    wBox   = elBox.width();
                    var W = [];
                    W[0] = wInit;
                    for (i = 1; i < childRow.length; i++) {
                        W[i] = childRow[i].offsetWidth;
                        wTotal= wTotal + childRow[i].offsetWidth;
                    }
                    wTotal = wTotal + 4*14; // add margin
                    
                    if (wTotal > wBox) {
                        var newW = wBox - wTotal + W[0] -1;
                        $(childRow[0]).css('width',newW);
                    } else {
                        $(childRow[0]).css('width',W[0]);
                    }
            }
    
            // The main function
            function Pickers(sgid,P) {
                
                // Variables
                var pObj  = P.inputs;
                var spans = document.getElementsByName(sgid);
                var sgElement = $("#" + sgid);
                
                // Nested Functions
                
                function getNewPicker(idx) {
                            
                    html="<div class='dials'  id='picker_" + sgid + "_dials'>";
                    html+="	 <span class='fa fa-angle-up' id='" + sgid + "_" + idx + "_up' name='changeValue' style='font-size:3em'></span><br>";
                    html+="	 <span class='face' id='" + sgid + "_" + idx + "' name='" + sgid + "'>" + addLeadingZero(pObj[i].initValue,pObj[i].nChar) + "</span><br>";
                    html+="	 <span class='fa fa-angle-down' id='" + sgid + "_" + idx + "_down' name='changeValue' style='font-size:3em'></span>";
                    html+="</div>";
                    if (pObj[i].label != undefined) {
                        html+="<div class='labels' id='picker_" + sgid + "_delimiter'>";
                        html+="	 " + pObj[i].label + "";
                        html+="</div>";
                    }
                    return html;
                }
    
                // Main bit
                
                for (i = 0; i < P.N; i++) {
                    pObj[i].value  = pObj[i].initValue;
                    pObj[i].spanId = sgid + "_" + i;
                    pObj[i].set    = 0;
                    
                    pObj[i].changeValue = function(direction) {
                        if (this.set == 1) {
                            if (direction == "up") {
                                this.value = this.value + this.step;
                            } else {
                                this.value = this.value - this.step;
                            }
                            
                            if (this.value < this.minValue) {
                                this.value = this.maxValue;
                            }
                            if (this.value > this.maxValue) {
                                this.value = this.minValue;
                            }
                        }
                        this.set = 1;
                        // Change the value in the span-element
                        $("#" + this.spanId).html(addLeadingZero(this.value,this.nChar));
                        $("#" + this.spanId).css("color","#000");
                        
                        // Change the value in the SG-input
                        var str = ""
                        var nset = 0;
                        for (j = 0; j < pObj.length; j++) {
                            str += addLeadingZero(pObj[j].value,pObj[j].nChar) + pObj[j].delimiter;
                            nset = nset + pObj[j].set;
                        }
                                    
                        // If all elements have been set, update the SG-element
                        if (nset === pObj.length) {
                            sgElement.val(str);
                        }
                    }
                }
                    
                var tp;
                tp="<div id='picker_" + sgid + "' style='width:100%;'>";
                tp+="  <div id='picker_" + sgid + "_row'>";
                tp+="    <div class='labels' id='picker_" + sgid + "_prelabel'>";
                tp+="	   " + P.pre + "";
                tp+="    </div>";
                for (i = 0; i < P.N; i++) {
                    tp+=getNewPicker(i);
                }
                tp+="    <div class='labels' id='picker_" + sgid + "_postlabel'>";
                tp+="	   " + P.post + "";
                tp+="    </div>";
                tp+="  </div>";
                tp+="</div>";
                
                var pnt = $('#' + sgid);//.parent(this);
                pnt.after(tp);
                $('#' + sgid).css("height","0px");
                $('#' + sgid).css("margin","0px");
                $('#' + sgid).css("padding","0px");
                $('#' + sgid).css("border","none");
                $('#' + sgid + "_prelabel").css("display","none");
                $('#' + sgid + "_postlabel").css("display","none");
                
                $(document).ready(function() {
                    
                    // set the size of the elements
                    var elRow    = $("#picker_" + sgid + "_row");
                    var childRow = elRow.children();
                    var wInit    = childRow[0].offsetWidth;
                    resizePickers(sgid,wInit);
    
                    // Read the values of the hidden input if this was already set
                    // Needed in case someone clicked back.
                    readValue(sgid,pObj);
                    
                    // Get the element, add a click listener...
                    document.getElementById("picker_" + sgid).addEventListener("mousedown", function(e) {
                        
                        if(e.target && e.target.attributes.name && e.target.attributes.name.value == "changeValue") {
                            
                            info = e.target.id.split("_");
                            
                            idx = parseInt(info[2]);
                            pObj[idx].changeValue(info[3])
                            intervalObj = setInterval(function(){ 
                                pObj[idx].changeValue(info[3]);
                            }, 300);
                            
                        }
                    });
                    
                    $(window).resize(function() {
                        clearTimeout(window.resizedFinished);
                        window.resizedFinished = setTimeout(function(){
                            resizePickers(sgid,wInit);
                        }, 250);
                    });
    
                });
                
            }
        </script>
        <script>
            
            var field_id   = "HBT_bedTime";
            var picker = [];
            picker[0] = {      // the index of this picker starting at zero
                initValue : 22,   // the initial value
                minValue  : 0,   // the minimal value
                maxValue  : 23,  // the maximum value
                step      : 1,   // increase or decrease step size
                nChar     : 2,   // add leading-zeros to nChar's, e.g. 07:00
                label     : ":",  // the label that is shown after the picker
                delimiter : ":"   // the delimiter between pickers that is stored in data
            }
            picker[1] = {      // the index of this picker starting at zero
                initValue : 30,   // the initial value
                minValue  : 0,   // the minimal value
                maxValue  : 55,  // the maximum value
                step      : 5,   // increase or decrease step size
                nChar     : 2,   // add leading-zeros to nChar's, e.g. 07:00
                label     : "",  // the label that is shown after the picker
                delimiter : ""   // the delimiter between pickers that is stored in data
            }
            // Leave the rest alone
            var P = { N : picker.length, pre : document.getElementById(field_id + "_prelabel").innerHTML, post : document.getElementById(field_id + "_postlabel").innerHTML, inputs : [] };
            for (i = 0; i < picker.length; i++) { P.inputs[i] = picker[i]; }
            Pickers(field_id,P);
            
            var field_id   = "HBT_wakeTime";
            var picker = [];
            picker[0] = {      // the index of this picker starting at zero
                initValue : 6,   // the initial value
                minValue  : 0,   // the minimal value
                maxValue  : 23,  // the maximum value
                step      : 1,   // increase or decrease step size
                nChar     : 2,   // add leading-zeros to nChar's, e.g. 07:00
                label     : ":",  // the label that is shown after the picker
                delimiter : ":"   // the delimiter between pickers that is stored in data
            }
            picker[1] = {      // the index of this picker starting at zero
                initValue : 30,   // the initial value
                minValue  : 0,   // the minimal value
                maxValue  : 55,  // the maximum value
                step      : 5,   // increase or decrease step size
                nChar     : 2,   // add leading-zeros to nChar's, e.g. 07:00
                label     : "",  // the label that is shown after the picker
                delimiter : ""   // the delimiter between pickers that is stored in data
            }
            // Leave the rest alone
            var P = { N : picker.length, pre : document.getElementById(field_id + "_prelabel").innerHTML, post : document.getElementById(field_id + "_postlabel").innerHTML, inputs : [] };
            for (i = 0; i < picker.length; i++) { P.inputs[i] = picker[i]; }
            Pickers(field_id,P);
            
            var field_id   = "HBT_lightsOff";
            var picker = [];
            picker[0] = {      // the index of this picker starting at zero
                initValue : 23,   // the initial value
                minValue  : 0,   // the minimal value
                maxValue  : 23,  // the maximum value
                step      : 1,   // increase or decrease step size
                nChar     : 2,   // add leading-zeros to nChar's, e.g. 07:00
                label     : ":",  // the label that is shown after the picker
                delimiter : ":"   // the delimiter between pickers that is stored in data
            }
            picker[1] = {      // the index of this picker starting at zero
                initValue : 30,   // the initial value
                minValue  : 0,   // the minimal value
                maxValue  : 55,  // the maximum value
                step      : 5,   // increase or decrease step size
                nChar     : 2,   // add leading-zeros to nChar's, e.g. 07:00
                label     : "",  // the label that is shown after the picker
                delimiter : ""   // the delimiter between pickers that is stored in data
            }
            // Leave the rest alone
            var P = { N : picker.length, pre : document.getElementById(field_id + "_prelabel").innerHTML, post : document.getElementById(field_id + "_postlabel").innerHTML, inputs : [] };
            for (i = 0; i < picker.length; i++) { P.inputs[i] = picker[i]; }
            Pickers(field_id,P);
            
            var field_id   = "HBT_lightsOn";
            var picker = [];
            picker[0] = {      // the index of this picker starting at zero
                initValue : 6,   // the initial value
                minValue  : 0,   // the minimal value
                maxValue  : 23,  // the maximum value
                step      : 1,   // increase or decrease step size
                nChar     : 2,   // add leading-zeros to nChar's, e.g. 07:00
                label     : ":",  // the label that is shown after the picker
                delimiter : ":"   // the delimiter between pickers that is stored in data
            }
            picker[1] = {      // the index of this picker starting at zero
                initValue : 30,   // the initial value
                minValue  : 0,   // the minimal value
                maxValue  : 55,  // the maximum value
                step      : 5,   // increase or decrease step size
                nChar     : 2,   // add leading-zeros to nChar's, e.g. 07:00
                label     : "",  // the label that is shown after the picker
                delimiter : ""   // the delimiter between pickers that is stored in data
            }
            // Leave the rest alone
            var P = { N : picker.length, pre : document.getElementById(field_id + "_prelabel").innerHTML, post : document.getElementById(field_id + "_postlabel").innerHTML, inputs : [] };
            for (i = 0; i < picker.length; i++) { P.inputs[i] = picker[i]; }
            Pickers(field_id,P);
            
            var field_id   = "LAB_bedTime";
            var picker = [];
            picker[0] = {      // the index of this picker starting at zero
                initValue : 22,   // the initial value
                minValue  : 0,   // the minimal value
                maxValue  : 23,  // the maximum value
                step      : 1,   // increase or decrease step size
                nChar     : 2,   // add leading-zeros to nChar's, e.g. 07:00
                label     : ":",  // the label that is shown after the picker
                delimiter : ":"   // the delimiter between pickers that is stored in data
            }
            picker[1] = {      // the index of this picker starting at zero
                initValue : 30,   // the initial value
                minValue  : 0,   // the minimal value
                maxValue  : 55,  // the maximum value
                step      : 5,   // increase or decrease step size
                nChar     : 2,   // add leading-zeros to nChar's, e.g. 07:00
                label     : "",  // the label that is shown after the picker
                delimiter : ""   // the delimiter between pickers that is stored in data
            }
            // Leave the rest alone
            var P = { N : picker.length, pre : document.getElementById(field_id + "_prelabel").innerHTML, post : document.getElementById(field_id + "_postlabel").innerHTML, inputs : [] };
            for (i = 0; i < picker.length; i++) { P.inputs[i] = picker[i]; }
            Pickers(field_id,P);
            
            var field_id   = "LAB_wakeTime";
            var picker = [];
            picker[0] = {      // the index of this picker starting at zero
                initValue : 6,   // the initial value
                minValue  : 0,   // the minimal value
                maxValue  : 23,  // the maximum value
                step      : 1,   // increase or decrease step size
                nChar     : 2,   // add leading-zeros to nChar's, e.g. 07:00
                label     : ":",  // the label that is shown after the picker
                delimiter : ":"   // the delimiter between pickers that is stored in data
            }
            picker[1] = {      // the index of this picker starting at zero
                initValue : 30,   // the initial value
                minValue  : 0,   // the minimal value
                maxValue  : 55,  // the maximum value
                step      : 5,   // increase or decrease step size
                nChar     : 2,   // add leading-zeros to nChar's, e.g. 07:00
                label     : "",  // the label that is shown after the picker
                delimiter : ""   // the delimiter between pickers that is stored in data
            }
            // Leave the rest alone
            var P = { N : picker.length, pre : document.getElementById(field_id + "_prelabel").innerHTML, post : document.getElementById(field_id + "_postlabel").innerHTML, inputs : [] };
            for (i = 0; i < picker.length; i++) { P.inputs[i] = picker[i]; }
            Pickers(field_id,P);
            
            var field_id   = "LAB_lightsOff";
            var picker = [];
            picker[0] = {      // the index of this picker starting at zero
                initValue : 22,   // the initial value
                minValue  : 0,   // the minimal value
                maxValue  : 23,  // the maximum value
                step      : 1,   // increase or decrease step size
                nChar     : 2,   // add leading-zeros to nChar's, e.g. 07:00
                label     : ":",  // the label that is shown after the picker
                delimiter : ":"   // the delimiter between pickers that is stored in data
            }
            picker[1] = {      // the index of this picker starting at zero
                initValue : 30,   // the initial value
                minValue  : 0,   // the minimal value
                maxValue  : 55,  // the maximum value
                step      : 5,   // increase or decrease step size
                nChar     : 2,   // add leading-zeros to nChar's, e.g. 07:00
                label     : "",  // the label that is shown after the picker
                delimiter : ""   // the delimiter between pickers that is stored in data
            }
            // Leave the rest alone
            var P = { N : picker.length, pre : document.getElementById(field_id + "_prelabel").innerHTML, post : document.getElementById(field_id + "_postlabel").innerHTML, inputs : [] };
            for (i = 0; i < picker.length; i++) { P.inputs[i] = picker[i]; }
            Pickers(field_id,P);
            
            var field_id   = "LAB_lightsOn";
            var picker = [];
            picker[0] = {      // the index of this picker starting at zero
                initValue : 6,   // the initial value
                minValue  : 0,   // the minimal value
                maxValue  : 23,  // the maximum value
                step      : 1,   // increase or decrease step size
                nChar     : 2,   // add leading-zeros to nChar's, e.g. 07:00
                label     : ":",  // the label that is shown after the picker
                delimiter : ":"   // the delimiter between pickers that is stored in data
            }
            picker[1] = {      // the index of this picker starting at zero
                initValue : 30,   // the initial value
                minValue  : 0,   // the minimal value
                maxValue  : 55,  // the maximum value
                step      : 5,   // increase or decrease step size
                nChar     : 2,   // add leading-zeros to nChar's, e.g. 07:00
                label     : "",  // the label that is shown after the picker
                delimiter : ""   // the delimiter between pickers that is stored in data
            }
            // Leave the rest alone
            var P = { N : picker.length, pre : document.getElementById(field_id + "_prelabel").innerHTML, post : document.getElementById(field_id + "_postlabel").innerHTML, inputs : [] };
            for (i = 0; i < picker.length; i++) { P.inputs[i] = picker[i]; }
            Pickers(field_id,P);
            
        </script>
        <style>
            VmInclude:__COMPONENT__/f/form.01.css
            VmInclude:__CURRENT_PATH__/../../f/form.02.css
            VmInclude:__CURRENT_PATH__/../../s/shared-css-pickers.css
        </style>
    </div>