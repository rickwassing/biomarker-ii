<link href="../../layout/stylesheet.css" rel="stylesheet" type="text/css" />

<!-- javascript links -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="../../js/rt-javascript.js"></script>

<section>
    VmInclude:__COMPONENT__/toolbar/back_save.html

    <table width=100% style="width:100%"><tr><td align="center">

        <form id=F__ID>
            <table id=tb__ID>

                <!-- Survey header -->
                <tr><td class='title__ID'>
                    <span class="survey-title">Epworth Sleepiness Scale</span>
                </td></tr>

                <!-- Set participant -->
                <tr id=tr_participant__ID style='display:none'><td data-id=Participant data-custom=1>
                    <input name=Participant  id=Participant__ID  type=text class=sel__ID placeholder='select a partcipant...'/>
                    <input name=Participant_uid id=Participant_uid__ID type=text readonly />
                    <u style='cursor:pointer;float:right;' id=Participant_r__ID>Remove</u>
                </td></tr>

                <!-- question and answer set -->
                <tr><td class='question__ID'>
                    <span class="survey-subquestion">How likely are you to doze or fall asleep in the following situations, in contrast to just feeling tired? This refers to your usual way of life in recent times. Even if you have not done some of these things recently, try to work out how they would have affected you.</span>
                    <table class=survey-matrix>
                        <tr>
                            <td class=survey-matrix-td-left style="width:60%;"></td>
                            <td class=survey-matrix-td-center style="width:10%;"><label class="survey-subquestion">would <b>never</b> doze</label></td>
                            <td class=survey-matrix-td-center style="width:10%;"><label class="survey-subquestion"><b>slight</b> chance of dozing</label></td>
                            <td class=survey-matrix-td-center style="width:10%;"><label class="survey-subquestion"><b>moderate</b> chance of dozing</label></td>
                            <td class=survey-matrix-td-center style="width:10%;"><label class="survey-subquestion"><b>high</b> chance of dozing</label></td>
                        </tr>
                        <tr class=survey-row>
                            <td class=survey-matrix-td-left><span class="survey-question">1. Sitting and reading</span></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0001 name=ESS_0001 id=ESS_0001-1 value=1 /></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0001 name=ESS_0001 id=ESS_0001-2 value=2 /></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0001 name=ESS_0001 id=ESS_0001-3 value=3 /></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0001 name=ESS_0001 id=ESS_0001-4 value=4 /></td>
                        </tr>
                        <tr class=survey-row>
                            <td class=survey-matrix-td-left><span class="survey-question">2. Watching TV</span></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0002 name=ESS_0002 id=ESS_0002-1 value=1 /></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0002 name=ESS_0002 id=ESS_0002-2 value=2 /></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0002 name=ESS_0002 id=ESS_0002-3 value=3 /></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0002 name=ESS_0002 id=ESS_0002-4 value=4 /></td>
                        </tr>
                        <tr class=survey-row>
                            <td class=survey-matrix-td-left><span class="survey-question">3. Sitting, inactive in a public place (e.g. a theatre or a meeting)</span></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0003 name=ESS_0003 id=ESS_0003-1 value=1 /></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0003 name=ESS_0003 id=ESS_0003-2 value=2 /></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0003 name=ESS_0003 id=ESS_0003-3 value=3 /></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0003 name=ESS_0003 id=ESS_0003-4 value=4 /></td>
                        </tr>
                        <tr class=survey-row>
                            <td class=survey-matrix-td-left><span class="survey-question">4. As a passenger in a car for an hour without a break</span></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0004 name=ESS_0004 id=ESS_0004-1 value=1 /></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0004 name=ESS_0004 id=ESS_0004-2 value=2 /></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0004 name=ESS_0004 id=ESS_0004-3 value=3 /></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0004 name=ESS_0004 id=ESS_0004-4 value=4 /></td>
                        </tr>
                        <tr class=survey-row>
                            <td class=survey-matrix-td-left><span class="survey-question">5. Lying down to rest in the afternoon when circumstances permit</span></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0005 name=ESS_0005 id=ESS_0005-1 value=1 /></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0005 name=ESS_0005 id=ESS_0005-2 value=2 /></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0005 name=ESS_0005 id=ESS_0005-3 value=3 /></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0005 name=ESS_0005 id=ESS_0005-4 value=4 /></td>
                        </tr>
                        <tr class=survey-row>
                            <td class=survey-matrix-td-left><span class="survey-question">6. Sitting and talking to someone</span></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0006 name=ESS_0006 id=ESS_0006-1 value=1 /></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0006 name=ESS_0006 id=ESS_0006-2 value=2 /></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0006 name=ESS_0006 id=ESS_0006-3 value=3 /></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0006 name=ESS_0006 id=ESS_0006-4 value=4 /></td>
                        </tr>
                        <tr class=survey-row>
                            <td class=survey-matrix-td-left><span class="survey-question">7. Sitting quietly after lunch without alcohol</span></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0007 name=ESS_0007 id=ESS_0007-1 value=1 /></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0007 name=ESS_0007 id=ESS_0007-2 value=2 /></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0007 name=ESS_0007 id=ESS_0007-3 value=3 /></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0007 name=ESS_0007 id=ESS_0007-4 value=4 /></td>
                        </tr>
                        <tr class=survey-row>
                            <td class=survey-matrix-td-left><span class="survey-question">8. In a car, while stopped for a few minutes in traffic</span></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0008 name=ESS_0008 id=ESS_0008-1 value=1 /></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0008 name=ESS_0008 id=ESS_0008-2 value=2 /></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0008 name=ESS_0008 id=ESS_0008-3 value=3 /></td>
                            <td class=survey-matrix-td-center><input type=radio class=modified_radio__ID data-custom=1 data-id=ESS_0008 name=ESS_0008 id=ESS_0008-4 value=4 /></td>
                        </tr>
                    </table>
                </td></tr>

            </table><br>&nbsp;<a id=save2__ID class=save_and_back__ID >Save &amp; Back</a>
        </form>

    </td></tr></table>
</section>
<script>


    function F__ID(){
        //----------------------------------
        VmInclude:__COMPONENT__/grid/form.v3.js
        VmInclude:__CURRENT_PATH__/task.form.js
        _json=''
        //----------------------------------
        $('#D__ID').on('load',function(){
            _init();
            _field_process();
            _task_fields=$vm.vm['__ID'].op.grid_to_form_parameters.task_fields;
            _set_participant_field();
            custom_field_process();
        })
        //----------------------------------
        var custom_field_process=function(){
            $('#tb__ID tbody *[data-custom=1]').each(function(){
                var field=$(this).attr('data-id');
                switch(field){
                    case "Participant":
                        $(this).find("input[name='"+field+"']").val(_records[I].Participant);
                        $(this).find("input[name='"+field+"_uid']").val(_records[I].Participant_uid);
                    break;
                    //Radio buttons
                    //case 'menstral_stop':
                    //case 'hysterectomy':
                    //case 'pregnancy':
                    //case 'hrt':
                    //case 'hrt_current':
                    //case 'cycle_consistent':
                    $('#tb__ID').find("input[name='"+field+"'][value='"+_records[I][field]+"']").prop('checked', true);
                    $('#tb__ID').find("input[name='"+field+")_']").on('click',function(){
                        _set_value(this.value,_records,I,field);
                    })
                    break;
                    //Checkbox
                    case 'Age':
                    case 'Male':
                    case 'Male':
                    case 'CPAP_yes':
                    case 'CPAP_no':
                    //case 'OSA15':
                    case 'HDEEG_yes':
                    case 'HDEEG_no':
                    case 'OSA14_yes':
                    case 'OSA14_no':
                    //case 'Female':
                    case 'English_yes':
                    case 'English_no':
                    case 'Neuropsych_yes':
                    case 'Neuropsych_no':
                    case 'mental_yes':
                    case 'mental_no':
                    //case 'dementia':
                    case 'Centralmeds_yes':
                    case 'Centralmeds_no':
                    case 'Shiftworker_yes':
                    case 'Shiftworker_no':
                    case 'Travel_yes':
                    case 'Travel_no':
                    //case 'Lowsemsa':
                    if(_records[I][field]=="1" || _records[I][field]=="True" || _records[I][field]=="on" ) $(this).prop('checked', true);
                    $(this).on('click', function(){
                        if($(this).prop("checked") == true)   _set_value("1",_records,I,field);
                        else                                  _set_value("0",_records,I,field);
                    });
                    break;
                    //Text
                    case 'Age_comment':
                    case 'Male_comment':
                    case 'CPAP_comment':
                    case 'HDEEG_comment':
                    case 'OSA14_comment':
                    case 'Head_comment':
                    //case 'Female_comment':
                    case 'English_comment':
                    case 'Neuropsych_comment':
                    case 'mental_comment':
                    case 'dementia_comment':
                    case 'Centralmeds_comment':
                    case 'Shiftworker_comment':
                    case 'Travel_comment':
                    case 'Lowsemsa_comment':
                        $(this).val(_records[I][field]);
                        $(this).on('change', function(){
                            _set_value($(this).val(),_records,I,field);
                        });
                    break;
                }
            });
        }
        //----------------------------------
        _before_submit=function(record,dbv){
            return _set_status_and_participant(record,dbv);
        }
        //----------------------------------
        _before_submit_form=function(){
        }
    }
</script>
<style>
    VmInclude:__COMPONENT__/toolbar/toolbar.css
    VmInclude:__COMPONENT__/grid/form.css
    #tb__ID tr td:nth-child(2),
    #tb__ID tr td:nth-child(3),
    #tb__ID tr td:nth-child(4),
    #tb__ID tr td:nth-child(5),
    #tb__ID tr td:nth-child(6)
    {
        text-align: center;
        padding: 5px;
    }
</style>